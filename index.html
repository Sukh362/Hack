<!DOCTYPE html>
<html>
<head>
<title>ParentGuard Web Panel</title>
<script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.20.0/firebase-database.js"></script>
</head>
<body>

<h2>ParentGuard Panel</h2>

Battery: <span id="battery">0%</span> <br><br>

<button onclick="micStart()">Start Mic</button>
<button onclick="micStop()">Stop Mic</button>

<script>
  var firebaseConfig = {
    apiKey: "AIzaSyCF7dwVP_r8qRxXiREFKUPl0gZA_5qgW6s",
    authDomain: "parent-guard-53b4a.firebaseapp.com",
    databaseURL: "https://parent-guard-53b4a-default-rtdb.firebaseio.com",
    projectId: "parent-guard-53b4a",
    storageBucket: "parent-guard-53b4a.appspot.com",
    messagingSenderId: "946864326298",
    appId: "1:946864326298:web:755a9d8982a19a5a9b8123"
  };
  firebase.initializeApp(firebaseConfig);

  var db = firebase.database();

  // Battery listener
  db.ref('child1').on('value', function(snapshot) {
    var data = snapshot.val();
    if(data && data.battery) {
      document.getElementById('battery').innerText = data.battery;
    }
  });

  function micStart() {
    db.ref('child1/commands').update({mic: "start"});
  }

  function micStop() {
    db.ref('child1/commands').update({mic: "stop"});
  }
</script>

</body>
</html>
