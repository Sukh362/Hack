<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guard Web Panel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6C63FF;
            --secondary: #4A44C6;
            --dark: #121212;
            --darker: #0A0A0A;
            --light: #F5F5F7;
            --card-bg: #1E1E2E;
            --success: #00D4AA;
            --warning: #FFB74D;
            --danger: #FF6B6B;
            --info: #4FC3F7;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--darker) 0%, var(--dark) 100%);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            animation: fadeIn 0.8s ease-out;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            margin-bottom: 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            flex-wrap: wrap;
            gap: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            animation: slideInLeft 0.8s ease-out;
        }

        .logo i {
            font-size: 2.5rem;
            color: var(--primary);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: pulse 2s infinite;
        }

        .logo h1 {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .status-bar {
            display: flex;
            gap: 15px;
            animation: slideInRight 0.8s ease-out;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: var(--card-bg);
            border-radius: 20px;
            font-size: 0.9rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .status-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .status-item i {
            color: var(--success);
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
            animation: fadeInUp 0.6s ease-out;
            animation-fill-mode: both;
        }

        .card:nth-child(1) { animation-delay: 0.1s; }
        .card:nth-child(2) { animation-delay: 0.2s; }
        .card:nth-child(3) { animation-delay: 0.3s; }
        .card:nth-child(4) { animation-delay: 0.4s; }
        .card:nth-child(5) { animation-delay: 0.5s; }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .card-title i {
            color: var(--primary);
            font-size: 1.4rem;
        }

        .card-content {
            font-size: 0.95rem;
            line-height: 1.6;
        }

        pre {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            overflow-x: auto;
            font-size: 0.85rem;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.05);
            animation: fadeIn 0.5s ease-out;
        }

        .battery-container {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }

        .battery-level {
            height: 25px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .battery-fill {
            height: 100%;
            border-radius: 12px;
            background: linear-gradient(90deg, var(--success), #00FFB3);
            transition: width 1s ease;
            width: 0%;
            animation: batteryFill 1.5s ease-out forwards;
        }

        .battery-percent {
            font-weight: 700;
            font-size: 1.2rem;
            min-width: 50px;
        }

        .location-map {
            height: 200px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .location-map i {
            font-size: 3rem;
            color: var(--primary);
            opacity: 0.7;
            animation: bounce 3s infinite;
        }

        .location-pin {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--danger);
            border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg);
            animation: pinPulse 2s infinite;
        }

        .location-pin:after {
            content: '';
            width: 10px;
            height: 10px;
            margin: 5px 0 0 5px;
            background: white;
            position: absolute;
            border-radius: 50%;
        }

        .apps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .app-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            transition: transform 0.3s ease;
            animation: fadeIn 0.5s ease-out;
            animation-fill-mode: both;
        }

        .app-item:nth-child(1) { animation-delay: 0.1s; }
        .app-item:nth-child(2) { animation-delay: 0.2s; }
        .app-item:nth-child(3) { animation-delay: 0.3s; }
        .app-item:nth-child(4) { animation-delay: 0.4s; }
        .app-item:nth-child(5) { animation-delay: 0.5s; }
        .app-item:nth-child(6) { animation-delay: 0.6s; }

        .app-item:hover {
            transform: scale(1.1);
        }

        .app-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }

        .app-name {
            font-size: 0.7rem;
            text-align: center;
            max-width: 70px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .files-container {
            margin-top: 15px;
        }

        .file-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 8px;
            background: rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            animation: slideInRight 0.5s ease-out;
            animation-fill-mode: both;
        }

        .file-item:nth-child(1) { animation-delay: 0.1s; }
        .file-item:nth-child(2) { animation-delay: 0.2s; }
        .file-item:nth-child(3) { animation-delay: 0.3s; }
        .file-item:nth-child(4) { animation-delay: 0.4s; }

        .file-item:hover {
            background: rgba(0, 0, 0, 0.3);
            transform: translateX(5px);
        }

        .file-icon {
            width: 30px;
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .file-info {
            flex: 1;
        }

        .file-name {
            font-weight: 500;
            font-size: 0.9rem;
        }

        .file-size {
            font-size: 0.7rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.7);
        }

        .loading i {
            margin-right: 10px;
            animation: spin 1.5s linear infinite;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes batteryFill {
            from { width: 0%; }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes pinPulse {
            0% { transform: rotate(-45deg) scale(1); }
            50% { transform: rotate(-45deg) scale(1.2); }
            100% { transform: rotate(-45deg) scale(1); }
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .status-bar {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .card {
                padding: 20px;
            }
            
            .logo h1 {
                font-size: 1.8rem;
            }
            
            .logo i {
                font-size: 2rem;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .card {
                padding: 15px;
            }
            
            .logo h1 {
                font-size: 1.5rem;
            }
            
            .status-item {
                padding: 6px 12px;
                font-size: 0.8rem;
            }
            
            .card-title {
                font-size: 1.1rem;
            }
            
            .apps-grid {
                grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
                gap: 10px;
            }
            
            .app-icon {
                width: 45px;
                height: 45px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <h1>Guard Web Panel</h1>
            </div>
            <div class="status-bar">
                <div class="status-item">
                    <i class="fas fa-circle"></i>
                    <span>Live Data</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-wifi"></i>
                    <span>Connected</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-clock"></i>
                    <span id="current-time">Loading...</span>
                </div>
            </div>
        </header>

        <div class="dashboard">
            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-mobile-alt"></i>
                        <h2>Device Info</h2>
                    </div>
                    <i class="fas fa-ellipsis-h"></i>
                </div>
                <div class="card-content">
                    <div class="loading" id="device-loading">
                        <i class="fas fa-spinner"></i>
                        <span>Loading device information...</span>
                    </div>
                    <pre id="device" style="display: none;"></pre>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-battery-half"></i>
                        <h2>Battery</h2>
                    </div>
                    <i class="fas fa-ellipsis-h"></i>
                </div>
                <div class="card-content">
                    <div class="loading" id="battery-loading">
                        <i class="fas fa-spinner"></i>
                        <span>Loading battery information...</span>
                    </div>
                    <div id="battery-content" style="display: none;">
                        <div class="battery-container">
                            <div class="battery-level">
                                <div class="battery-fill" id="battery-fill"></div>
                            </div>
                            <div class="battery-percent" id="battery-percent">0%</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-map-marker-alt"></i>
                        <h2>Location</h2>
                    </div>
                    <i class="fas fa-ellipsis-h"></i>
                </div>
                <div class="card-content">
                    <div class="loading" id="location-loading">
                        <i class="fas fa-spinner"></i>
                        <span>Loading location information...</span>
                    </div>
                    <div id="location-content" style="display: none;">
                        <pre id="location"></pre>
                        <div class="location-map">
                            <i class="fas fa-map"></i>
                            <div class="location-pin"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-th-large"></i>
                        <h2>Installed Apps</h2>
                    </div>
                    <i class="fas fa-ellipsis-h"></i>
                </div>
                <div class="card-content">
                    <div class="loading" id="apps-loading">
                        <i class="fas fa-spinner"></i>
                        <span>Loading apps information...</span>
                    </div>
                    <div id="apps-content" style="display: none;">
                        <pre id="apps"></pre>
                        <div class="apps-grid" id="apps-grid"></div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <div class="card-title">
                        <i class="fas fa-folder"></i>
                        <h2>My Files</h2>
                    </div>
                    <i class="fas fa-ellipsis-h"></i>
                </div>
                <div class="card-content">
                    <div class="loading" id="files-loading">
                        <i class="fas fa-spinner"></i>
                        <span>Loading files information...</span>
                    </div>
                    <div id="files-content" style="display: none;">
                        <pre id="myfiles"></pre>
                        <div class="files-container" id="files-container"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

    <script>
        // Update current time
        function updateTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = now.toLocaleTimeString();
        }
        setInterval(updateTime, 1000);
        updateTime();

        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyBu_kO8o411oUbAz0QiYUTmrOhaxf1gLyM",
            authDomain: "guard-22007.firebaseapp.com",
            databaseURL: "https://guard-22007-default-rtdb.firebaseio.com",
            projectId: "guard-22007",
            storageBucket: "guard-22007.appspot.com",
            messagingSenderId: "166908422013",
            appId: "1:166908422013:android:3f6f845b720257c188ce14"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const dbRef = firebase.database().ref('responses/structured_data');

        // Listen for changes in Firebase
        dbRef.on('value', snapshot => {
            const data = snapshot.val();
            if(!data) return;

            // Hide loading indicators and show content
            document.getElementById('device-loading').style.display = 'none';
            document.getElementById('device').style.display = 'block';
            document.getElementById('battery-loading').style.display = 'none';
            document.getElementById('battery-content').style.display = 'block';
            document.getElementById('location-loading').style.display = 'none';
            document.getElementById('location-content').style.display = 'block';
            document.getElementById('apps-loading').style.display = 'none';
            document.getElementById('apps-content').style.display = 'block';
            document.getElementById('files-loading').style.display = 'none';
            document.getElementById('files-content').style.display = 'block';

            // Update device info
            if (data.Device) {
                document.getElementById('device').textContent = JSON.stringify(data.Device, null, 2);
            }

            // Update battery info
            if (data.Battery) {
                const batteryPercent = data.Battery + "%";
                document.getElementById('battery-percent').textContent = batteryPercent;
                document.getElementById('battery-fill').style.width = batteryPercent;
                
                // Change color based on battery level
                if (data.Battery < 20) {
                    document.getElementById('battery-fill').style.background = "linear-gradient(90deg, var(--danger), #FF8A8A)";
                } else if (data.Battery < 50) {
                    document.getElementById('battery-fill').style.background = "linear-gradient(90deg, var(--warning), #FFD180)";
                }
            }

            // Update location info
            if (data.Location) {
                document.getElementById('location').textContent = JSON.stringify(data.Location, null, 2);
            }

            // Update apps info
            if (data.Apps) {
                document.getElementById('apps').textContent = JSON.stringify(data.Apps, null, 2);
                
                // Create app icons for visualization
                const appsGrid = document.getElementById('apps-grid');
                appsGrid.innerHTML = '';
                
                // Sample app icons (in a real scenario, you would use actual app data)
                const sampleApps = ['Settings', 'Camera', 'Chrome', 'Maps', 'Photos', 'Messages', 'Phone', 'WhatsApp'];
                
                sampleApps.forEach((app, index) => {
                    const appItem = document.createElement('div');
                    appItem.className = 'app-item';
                    appItem.style.animationDelay = `${index * 0.1}s`;
                    
                    const appIcon = document.createElement('div');
                    appIcon.className = 'app-icon';
                    appIcon.innerHTML = `<i class="fas fa-mobile-alt"></i>`;
                    
                    const appName = document.createElement('div');
                    appName.className = 'app-name';
                    appName.textContent = app;
                    
                    appItem.appendChild(appIcon);
                    appItem.appendChild(appName);
                    appsGrid.appendChild(appItem);
                });
            }

            // Update files info
            if (data.MyFiles) {
                document.getElementById('myfiles').textContent = JSON.stringify(data.MyFiles, null, 2);
                
                // Create file items for visualization
                const filesContainer = document.getElementById('files-container');
                filesContainer.innerHTML = '';
                
                // Sample files (in a real scenario, you would use actual file data)
                const sampleFiles = [
                    { name: 'document.pdf', size: '2.4 MB', type: 'pdf' },
                    { name: 'image.jpg', size: '1.8 MB', type: 'image' },
                    { name: 'video.mp4', size: '15.7 MB', type: 'video' },
                    { name: 'notes.txt', size: '24 KB', type: 'text' }
                ];
                
                sampleFiles.forEach((file, index) => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    fileItem.style.animationDelay = `${index * 0.1}s`;
                    
                    const fileIcon = document.createElement('div');
                    fileIcon.className = 'file-icon';
                    
                    // Set appropriate icon based on file type
                    if (file.type === 'pdf') {
                        fileIcon.innerHTML = '<i class="fas fa-file-pdf"></i>';
                    } else if (file.type === 'image') {
                        fileIcon.innerHTML = '<i class="fas fa-file-image"></i>';
                    } else if (file.type === 'video') {
                        fileIcon.innerHTML = '<i class="fas fa-file-video"></i>';
                    } else {
                        fileIcon.innerHTML = '<i class="fas fa-file-alt"></i>';
                    }
                    
                    const fileInfo = document.createElement('div');
                    fileInfo.className = 'file-info';
                    
                    const fileName = document.createElement('div');
                    fileName.className = 'file-name';
                    fileName.textContent = file.name;
                    
                    const fileSize = document.createElement('div');
                    fileSize.className = 'file-size';
                    fileSize.textContent = file.size;
                    
                    fileInfo.appendChild(fileName);
                    fileInfo.appendChild(fileSize);
                    
                    fileItem.appendChild(fileIcon);
                    fileItem.appendChild(fileInfo);
                    
                    filesContainer.appendChild(fileItem);
                });
            }
        });
    </script>
</body>
    </html>
